<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DIY Rain Detector Quiz</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .option {
      transition: all 0.25s;
    }
    .option:hover {
      background-color: #e0f2fe;
      border-color: #60a5fa;
      transform: translateX(4px);
    }
    .selected {
      background-color: #bfdbfe !important;
      border-color: #3b82f6 !important;
      font-weight: 600;
    }
    .correct {
      background-color: #d1fae5 !important;
      border-color: #10b981 !important;
    }
    .wrong {
      background-color: #fee2e2 !important;
      border-color: #ef4444 !important;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-cyan-50 min-h-screen flex items-center justify-center p-6">

  <div class="w-full max-w-2xl bg-white rounded-2xl shadow-2xl p-8 md:p-10 border-t-4 border-blue-500">

    <!-- Progress bar -->
    <div class="mb-8">
      <div class="w-full bg-gray-200 rounded-full h-3">
        <div id="progress" class="bg-blue-500 h-3 rounded-full w-0 transition-all duration-600"></div>
      </div>
      <div class="text-center text-sm text-gray-600 mt-3 font-medium">
        Question <span id="qnum">1</span> / <span id="qtotal">0</span>
      </div>
    </div>

    <h2 id="question" class="text-2xl md:text-3xl font-bold text-gray-800 mb-10 text-center leading-tight"></h2>

    <div id="options" class="space-y-4 mb-12"></div>

    <div class="text-center">
      <div id="feedback" class="text-lg font-semibold min-h-[2rem] mb-6"></div>
      <button id="btn"
        class="px-10 py-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl text-lg disabled:bg-gray-400 disabled:cursor-not-allowed transition shadow-md">
        Choose an answer first
      </button>
    </div>

    <!-- Result screen -->
    <div id="result" class="hidden text-center mt-6">
      <h3 class="text-4xl font-bold text-gray-800 mb-6">Quiz Complete!</h3>
      <div class="text-6xl font-black text-blue-600 mb-4">
        <span id="score">0</span> / <span id="total">0</span>
      </div>
      <p class="text-xl text-gray-600 mb-10">correct answers</p>
      <button id="restart"
        class="px-12 py-5 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-xl text-xl transition shadow-lg">
        Try Again
      </button>
    </div>

  </div>

  <script>
    const questions = [
      {
        q: "What is the most common material used as a rain sensor in a simple DIY rain detector?",
        options: [
          "Aluminum foil",
          "Two metal wires / nails placed close together",
          "A small magnet",
          "A piece of cloth"
        ],
        correct: 1
      },
      {
        q: "When rain falls on the sensor, what usually happens in the simplest circuit?",
        options: [
          "The resistance between two points decreases significantly",
          "The voltage suddenly increases",
          "The LED starts blinking very fast",
          "The buzzer turns off"
        ],
        correct: 0
      },
      {
        q: "Which component is most commonly used to give a visual indication that it is raining?",
        options: [
          "Buzzer",
          "Small DC motor",
          "LED (light-emitting diode)",
          "7-segment display"
        ],
        correct: 2
      },
      {
        q: "In the most basic version, what kind of power source is usually enough?",
        options: [
          "9 V battery",
          "Two AA batteries (3 V)",
          "220 V AC directly from wall socket",
          "Car battery (12 V)"
        ],
        correct: 1
      },
      {
        q: "Which of these is NOT usually needed to build a very simple rain detector model?",
        options: [
          "Transistor (BC547 / 2N2222 etc.)",
          "Resistor (10 kΩ or similar)",
          "Breadboard or soldering iron",
          "Copper wires or paper clips"
        ],
        correct: 0
      },
      {
        q: "Why do we usually put a resistor in series with the LED in this project?",
        options: [
          "To make the LED shine brighter",
          "To limit current so the LED does not burn",
          "To detect rain faster",
          "To make sound louder"
        ],
        correct: 1
      },
      {
        q: "What happens to the circuit when the sensor becomes completely dry again?",
        options: [
          "LED stays ON forever",
          "LED turns OFF (in the simplest design)",
          "Buzzer keeps beeping",
          "Battery drains very quickly"
        ],
        correct: 1
      }
    ];

    let current = 0;
    let score = 0;
    let selected = null;
    let answered = false;

    const qEl      = document.getElementById("question");
    const optEl    = document.getElementById("options");
    const btn      = document.getElementById("btn");
    const feedback = document.getElementById("feedback");
    const progress = document.getElementById("progress");
    const qnum     = document.getElementById("qnum");
    const qtotal   = document.getElementById("qtotal");

    const resultEl = document.getElementById("result");
    const scoreEl  = document.getElementById("score");
    const totalEl  = document.getElementById("total");
    const restart  = document.getElementById("restart");

    function load() {
      const item = questions[current];
      qEl.textContent = item.q;
      qnum.textContent = current + 1;
      qtotal.textContent = questions.length;
      progress.style.width = ((current + 1) / questions.length * 100) + "%";

      optEl.innerHTML = "";
      selected = null;
      answered = false;
      feedback.textContent = "";
      btn.disabled = true;
      btn.textContent = "Choose an answer first";

      item.options.forEach((text, i) => {
        const div = document.createElement("div");
        div.className = "p-5 border-2 border-gray-300 rounded-xl cursor-pointer option text-lg";
        div.textContent = text;
        div.dataset.idx = i;

        div.addEventListener("click", () => {
          if (answered) return;
          [...optEl.children].forEach(el => el.classList.remove("selected"));
          div.classList.add("selected");
          selected = i;
          btn.disabled = false;
          btn.textContent = current === questions.length - 1 ? "Finish Quiz" : "Next →";
        });

        optEl.appendChild(div);
      });
    }

    function showResult() {
      answered = true;
      const correct = questions[current].correct;

      [...optEl.children].forEach(el => {
        const idx = +el.dataset.idx;
        if (idx === correct)  el.classList.add("correct");
        if (idx === selected) {
          if (idx === correct) {
            score++;
            feedback.textContent = "Correct!";
            feedback.className = "text-green-700";
          } else {
            el.classList.add("wrong");
            feedback.textContent = "Wrong";
            feedback.className = "text-red-700";
          }
        }
      });

      btn.disabled = false;
    }

    btn.addEventListener("click", () => {
      if (!answered) {
        showResult();
      } else if (current < questions.length - 1) {
        current++;
        load();
      } else {
        // show final result
        resultEl.classList.remove("hidden");
        btn.classList.add("hidden");
        scoreEl.textContent = score;
        totalEl.textContent = questions.length;
      }
    });

    restart.addEventListener("click", () => {
      current = 0;
      score = 0;
      resultEl.classList.add("hidden");
      btn.classList.remove("hidden");
      load();
    });

    // Start quiz
    load();
  </script>
</body>
</html>